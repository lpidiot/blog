<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>管理首页</title>
    <style type="text/css">
        body {
            font-family: 'Source Sans Pro', 'Helvetica Neue', Arial, sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            -webkit-text-size-adjust: none;
            position: relative;
            height: 100%;
            margin: 0;
            color: #34495e;
            font-size: 16px;
        }

        .hand {
            cursor: pointer;
        }

        .articleBox {
            width: 100%;
            display: flex;
            flex-direction: column;
            margin: 25px 0;
        }

        .article {
            margin: 20px 80px;
        }

        .article-tit {
            color: #34495e;

        }

        .article-tit h2 {
            font-size: 1.6em;
            font-weight: bold;
            margin: 0;
        }

        .article-tag p {
            font-family: 'Roboto Mono', Monaco, courier, monospace;
            font-size: 0.8em;
            display: inline-block;
            background-color: #f8f8f8;
            color: #e96900;
            padding: 3px 5px;
            margin: 0 2px 5px 0;
            border-radius: 2px;
            white-space: nowrap;
        }

        .article-time {
            color: #7f8c8d;
            margin: 10px 0;
            font-size: 0.9em;
        }

        .article-content {
            font-size: 16px;
            color: #34495e;
            font-family: 'Source Sans Pro', 'Helvetica Neue', Arial, sans-serif;
            margin: 8px 0;
            display: -webkit-box;
            -webkit-box-orient: vertical;
            -webkit-line-clamp: 3;
            overflow: hidden;

        }

        .article-tools a {
            text-decoration: none;
            color: #42b983;
            cursor: pointer;
            font-weight: 600;
            display: inline-block;
            transition: all 0.3s;
            margin-right: 20px;
        }

    </style>
</head>
<body>
<nav class="navbar navbar-default navbar-static-top navbar-inverse">
    <div class="container">
        <div class="navbar-header">
            <a href="../index" class="navbar-brand hand">Blog主站</a>
        </div>
        <div class="collapse navbar-collapse">
            <ul class="nav navbar-nav">
                <li><a href="index">开始记录</a></li>
                <li><a href="#">文章管理</a></li>
                <li class="dropdown"><a class="dropdown-toggle hand" data-toggle="dropdown"> 数据管理<span
                        class="caret"></span></a>
                    <ul class="dropdown-menu">
                        <li><a href="#">迁入(hexo)</a></li>
                        <li class="divider"></li>
                        <li><a href="#">迁出(hexo)</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</nav>
<div id="showInfo" style="display: none;align-items: center;flex-direction: column;z-index: 1000;">
<div id="alertView" class="alert" style="width: 40%;">
    <a href="#" class="close" onclick="hiddenInfo();">&times;</a>
    <strong id="info"></strong>
</div>
</div>
<div class="container">
    <div id="content"></div>
    <div id="myArticle" class="articleBox">

    </div>
</div>

<div id="confirm" class="modal fade" role="dialog" data-backdrop="static" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button class="close" role="button" aria-label="close" data-dismiss="modal"><span aria-hidden="true">&times;</span>
                    <h3>确认操作</h3>
                </button>
            </div>
            <div class="modal-body">
                aaa
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary">Save changes</button>
            </div>
        </div>
    </div>
</div>

</body>

<!--<link rel="stylesheet" href="http://cdn.bootcss.com/bootstrap/3.3.0/css/bootstrap.min.css">
<script src="http://cdn.bootcss.com/jquery/1.11.1/jquery.min.js"></script>
<script src="http://cdn.bootcss.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>-->


<!--
<link rel="stylesheet" href="../webjars/bootstrap/css/bootstrap.min.css"/>
<script src="../webjars/jquery/jquery.min.js"></script>
<script src="../webjars/bootstrap/js/bootstrap.min.js"></script>-->


<link rel="stylesheet" href="../statics/bootstrap-3.3.7-dist/css/bootstrap.css">
<script src="../statics/js/jquery.min.js"></script>
<script src="../statics/bootstrap-3.3.7-dist/js/bootstrap.js"></script>




<script data-th-inline="javascript">
    $(getArticle());

    function getArticle() {
        $.ajax({
            url: 'page',
            type: 'get',
            catch: false,
            success: function (result) {
                //console.log(result);
                //先清空容器
                $('#myArticle').html('');
                for (var i in result) {
                    var htm =
                        '<div class="article">' +
                        '<div class="article-tit"><h2>' + result[i].title + '</h2></div>' +
                        '<div class="article-time">' + result[i].time + '</div>' +
                        '<div class="article-tag"><p class="hand">' + result[i].tag + '</p></div>' +
                        '<div class="article-content">' + result[i].sketch + '</div>' +
                        '<div class="article-tools"><a class="more" href="edit?id=' + result[i].id + '">修改</a>' +
                        '<a id="delete" onclick="deleteArticle(' + result[i].id + ')">删除</a></div>' +
                        '</div>';
                    $('#myArticle').append(htm);
                }
            },
            fail: function (result) {

            }
        })
    }

    function deleteArticle(id) {
        $.ajax({
            url: 'delete',
            type: 'post',
            catch: false,
            data: {id: id},
            success: function (result) {
                console.log(result);
                if(result.state) {
                    $('#alertView').removeClass('alert-danger');
                    $('#alertView').addClass('alert-success');
                    getArticle();
                }else{
                    $('#alertView').removeClass('alert-success');
                    $('#alertView').addClass('alert-danger');
                }
                $('#info').html(result.content);
                $('#showInfo').css('display','flex');

            },
            fail: function (result) {

            }
        })
    }
function hiddenInfo() {
    $('#showInfo').css('display','none');
}
</script>
</html>
